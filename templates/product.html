{% include 'owner-navbar.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Product Management</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
body{
  background: linear-gradient(120deg,#f6f9fc,#eef2f7);
  font-family: "Segoe UI", sans-serif;
}

.page-container{
  max-width: 1100px;
  margin: auto;
}

.page-title{
  font-weight: 700;
  color: #2c3e50;
}

.card{
  border: none;
  border-radius: 14px;
  box-shadow: 0 8px 25px rgba(0,0,0,.08);
}

.card-header{
  background: transparent;
  font-weight: 600;
  font-size: 1.1rem;
  border-bottom: 1px solid #eee;
}

.form-control, .form-select{
  border-radius: 10px;
  padding: 10px 14px;
}

.form-control:focus, .form-select:focus{
  box-shadow: 0 0 0 .2rem rgba(13,110,253,.15);
}

.btn-primary{
  border-radius: 12px;
  padding: 10px;
  font-weight: 600;
}

.table{
  margin-bottom: 0;
}

.table thead{
  background: #f8fafc;
}

.table th{
  font-weight: 600;
  color: #555;
}

.badge-unit{
  background: #e9f2ff;
  color: #0d6efd;
  font-weight: 600;
  padding: 6px 10px;
  border-radius: 20px;
}

.action-btn{
  border-radius: 8px;
}

.empty-state{
  text-align: center;
  padding: 40px;
  color: #999;
}
</style>
</head>

<body>

  {% block owner_navbar %}
  {% endblock owner_navbar %}
<div class="page-container mt-4">

<h2 class="page-title mb-4">
  ðŸ›’ Product Management
</h2>

<!-- Product Form -->
<div class="card mb-4">
  <div class="card-header">Add / Edit Product</div>
  <div class="card-body">
    <div class="row g-3 align-items-end">
      <div class="col-md-4">
        <label class="form-label">Product Name</label>
        <input type="text" id="productName" class="form-control" placeholder="e.g. Rice">
      </div>
      <div class="col-md-3">
        <label class="form-label">Rate (â‚¹)</label>
        <input type="number" id="productRate" class="form-control" placeholder="e.g. 60">
      </div>
      <div class="col-md-3">
        <label class="form-label">Unit</label>
        <select id="productUnit" class="form-select">
          <option value="">Select Unit</option>
          <option value="kg">Per Kg</option>
          <option value="liter">Per Liter</option>
          <option value="piece">Per Piece</option>
        </select>
      </div>
      <div class="col-md-2 d-grid">
        <button class="btn btn-primary" onclick="saveProduct()">
          <i class="bi bi-check-circle"></i> Save
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Products Table -->
<div class="card">
  <div class="card-header">Available Products</div>
  <div class="card-body p-0">
    <table class="table table-hover align-middle text-center">
      <thead>
        <tr>
          <th>#</th>
          <th>Product</th>
          <th>Rate</th>
          <th>Unit</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="productTable">
        <tr>
          <td colspan="5" class="empty-state">
            No products added yet
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

</div>

<script>
let products=[];
let editIndex=-1;

function saveProduct(){
  const name=productName.value.trim();
  const rate=productRate.value;
  const unit=productUnit.value;

  if(!name || !rate || !unit){
    alert("Fill all fields");
    return;
  }

  if(editIndex===-1){
    products.push({name,rate,unit});
  }else{
    products[editIndex]={name,rate,unit};
    editIndex=-1;
  }

  clearForm();
  renderTable();
}

function renderTable(){
  productTable.innerHTML="";

  if(products.length===0){
    productTable.innerHTML=`
      <tr>
        <td colspan="5" class="empty-state">No products added yet</td>
      </tr>`;
    return;
  }

  products.forEach((p,i)=>{
    productTable.innerHTML+=`
      <tr>
        <td>${i+1}</td>
        <td class="fw-semibold">${p.name}</td>
        <td>â‚¹${p.rate}</td>
        <td><span class="badge-unit">${p.unit}</span></td>
        <td>
          <button class="btn btn-sm btn-warning action-btn me-1" onclick="editProduct(${i})">
            <i class="bi bi-pencil"></i>
          </button>
          <button class="btn btn-sm btn-danger action-btn" onclick="deleteProduct(${i})">
            <i class="bi bi-trash"></i>
          </button>
        </td>
      </tr>`;
  });
}

function editProduct(i){
  productName.value=products[i].name;
  productRate.value=products[i].rate;
  productUnit.value=products[i].unit;
  editIndex=i;
}

function deleteProduct(i){
  if(confirm("Delete this product?")){
    products.splice(i,1);
    renderTable();
  }
}

function clearForm(){
  productName.value="";
  productRate.value="";
  productUnit.value="";
}
</script>

</body>
</html>
