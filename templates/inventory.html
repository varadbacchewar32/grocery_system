<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Inventory Management</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
body{
  background: linear-gradient(120deg,#f6f9fc,#eef2f7);
  font-family: "Segoe UI", sans-serif;
}

.page-container{
  max-width: 1100px;
  margin: auto;
  padding: 20px;
}

.page-title{
  font-weight: 700;
  color: #2c3e50;
  margin-bottom: 25px;
}

.card{
  border: none;
  border-radius: 14px;
  box-shadow: 0 8px 25px rgba(0,0,0,.08);
}

.form-control, .form-select{
  border-radius: 10px;
}

.table thead{
  background: #f8fafc;
}

.badge-ok{
  background: #e8f7ee;
  color: #1e824c;
  font-weight: 600;
}

.badge-low{
  background: #fff3cd;
  color: #9a6b00;
  font-weight: 600;
}

.badge-out{
  background: #fdecea;
  color: #b02a37;
  font-weight: 600;
}
</style>
</head>

<body>

{% include 'owner-navbar.html' %}

<div class="page-container">

<h2 class="page-title">ðŸ“¦ Inventory Management</h2>

<!-- Add / Update Inventory -->
<div class="card mb-4">
  <div class="card-header fw-semibold">Add / Update Stock</div>
  <div class="card-body">
    <div class="row g-3 align-items-end">

      <div class="col-md-5">
        <label class="form-label">Product</label>
        <select id="invProduct" class="form-select">
          <option value="">Select Product</option>
          <option value="Rice">Rice</option>
          <option value="Oil">Oil</option>
          <option value="Sugar">Sugar</option>
          <option value="Biscuits">Biscuits</option>
        </select>
      </div>

      <div class="col-md-3">
        <label class="form-label">Quantity</label>
        <input type="number" id="invQty" class="form-control" placeholder="Enter quantity">
      </div>

      <div class="col-md-2 d-grid">
        <button class="btn btn-primary" onclick="saveInventory()">
          Save
        </button>
      </div>

    </div>
  </div>
</div>

<!-- Inventory Table -->
<div class="card">
  <div class="card-header fw-semibold">Inventory List</div>
  <div class="card-body p-0">
    <table class="table table-hover align-middle mb-0 text-center">
      <thead>
        <tr>
          <th>#</th>
          <th class="text-start">Product</th>
          <th>Quantity</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="inventoryTable">
        <tr>
          <td colspan="5" class="text-muted py-4">
            No inventory added yet
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

</div>

<script>
let inventory = [];
let editIndex = -1;

function saveInventory(){
  const product = invProduct.value;
  const qty = Number(invQty.value);

  if(!product || qty < 0){
    alert("Select product and valid quantity");
    return;
  }

  if(editIndex === -1){
    inventory.push({product, qty});
  } else {
    inventory[editIndex] = {product, qty};
    editIndex = -1;
  }

  invProduct.value = "";
  invQty.value = "";
  renderInventory();
}

function renderInventory(){
  inventoryTable.innerHTML = "";

  if(inventory.length === 0){
    inventoryTable.innerHTML = `
      <tr>
        <td colspan="5" class="text-muted py-4">No inventory added yet</td>
      </tr>`;
    return;
  }

  inventory.forEach((item, i) => {
    let status = "OK";
    let badge = "badge-ok";

    if(item.qty === 0){
      status = "Out";
      badge = "badge-out";
    } else if(item.qty <= 5){
      status = "Low";
      badge = "badge-low";
    }

    inventoryTable.innerHTML += `
      <tr>
        <td>${i+1}</td>
        <td class="text-start fw-semibold">${item.product}</td>
        <td>${item.qty}</td>
        <td><span class="badge ${badge}">${status}</span></td>
        <td>
          <button class="btn btn-sm btn-warning" onclick="editInventory(${i})">
            Edit
          </button>
        </td>
      </tr>
    `;
  });
}

function editInventory(i){
  invProduct.value = inventory[i].product;
  invQty.value = inventory[i].qty;
  editIndex = i;
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
